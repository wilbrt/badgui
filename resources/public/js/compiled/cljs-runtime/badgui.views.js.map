{"version":3,"sources":["badgui/views.cljs"],"mappings":"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","names":["badgui.views/hoverbox","info","badgui.views/display-results","result","a","b","box","re_frame.core.subscribe","cljs.core.gensym","re-frame.core/dispatch","badgui.views/display-history","keyded","cljs.reader.read_string","badgui.views/history-list","num","history","cljs.core.map","cljs.core.nth","cljs.core/deref","cljs.core.partition","badgui.views/search-field","p1__29254#","value","badgui.views/buttons","badgui.views/main-panel","loading","results","ongoing","cljs.core.doall","p1__29255#","cljs.core/second"],"sourcesContent":["(ns badgui.views\r\n  (:require\r\n   [re-frame.core :as re-frame]\r\n   [badgui.events :as events]\r\n   [badgui.subs :as subs]))\r\n\r\n(defn hoverbox [info]\r\n  [:div.box.right\r\n   [:h3 (str (:name info) \"'s statitistics\")]\r\n   [:p (str \"Total matches played: \" (:gamesplayed info))]\r\n   [:p (str \"Winrate: \" (:winrate info))]\r\n   [:p (str \"Most played: \" (str (:mostplayed info)))]])\r\n\r\n(defn display-results [result]\r\n  (let [a (:playerA result)\r\n        b (:playerB result)\r\n        box (re-frame/subscribe [::subs/box])]\r\n    [:div.b {:key (gensym \"on-going\") :align \"center\"}\r\n     [:td [:h3 {:on-click #(re-frame/dispatch [::events/boxit (:name a)])} (str (:name a))]\r\n           [:p (str (:played a))]]\r\n     [:td.versus (str \" VS \")]\r\n     [:td [:h3 {:on-click #(re-frame/dispatch [::events/boxit (:name b)])} (str (:name b))]\r\n           [:p (str (:played b))]]]))\r\n\r\n(defn display-history [result]\r\n  (let [keyded (cljs.reader/read-string result)]\r\n  [:div.b2 {:key (gensym \"history\") :align \"center\"}\r\n   [:td [:h3 {:on-click #(re-frame/dispatch [::events/boxit (:namea keyded)])} (str (:namea keyded))]\r\n         [:p (str (:playa keyded))]]\r\n   [:td.versus (str \" VS \")]\r\n   [:td [:h3 {:on-click #(re-frame/dispatch [::events/boxit (:nameb keyded)])} (str (:nameb keyded))]\r\n         [:p (str (:playb keyded))]]]))\r\n\r\n(defn history-list [num]\r\n (let [history (re-frame/subscribe [::subs/history])]\r\n  (map display-history (nth (partition 5 @history) num))))\r\n\r\n(defn search-field []\r\n  (let [value (re-frame/subscribe [::subs/searchf])]\r\n    [:div.versus\r\n      [:input {:value @value\r\n              :on-change #(re-frame/dispatch [::events/update-search (-> % .-target .-value)])\r\n              :type \"text\" :placeholder \"Playername\"}]\r\n      [:button {:on-click #(re-frame/dispatch [::events/boxit @value])}\"search\"]]))\r\n\r\n(defn buttons []\r\n  (let [num (re-frame/subscribe [::subs/pagenum])]\r\n    [:div (when (> (:now @num) 0)\r\n      [:button.marg\r\n        {:on-click #(re-frame/dispatch [::events/pagenumber -1])} \"<<\"])\r\n    (when (< (:now @num) (inc (:max @num)))\r\n      [:button.marg\r\n        {:on-click #(re-frame/dispatch [::events/pagenumber 1])} \">>\"])]))\r\n\r\n(defn main-panel []\r\n  (let [loading (re-frame/subscribe [::subs/loading])\r\n        results (re-frame/subscribe [::subs/results])\r\n        ongoing (re-frame/subscribe [::subs/ongoing])\r\n        box (re-frame/subscribe [::subs/box])\r\n        history (re-frame/subscribe [::subs/history])\r\n        num (re-frame/subscribe [::subs/pagenum])]\r\n    [:body\r\n     [:div.left\r\n     [:h1 {:align \"center\"} \"Bad game viewer\"]\r\n        [:h3 {:align \"center\"} \"Ongoing Games\"]\r\n         [:div {:align \"center\"}\r\n          [:th \"Player A\"]\r\n              [:th.versus \" \"]\r\n              [:th.padleft \"Player B\"]]\r\n     (doall (map #(display-results (second %)) @ongoing))]\r\n     [:div.right\r\n      [:h3.left {:align \"center\"} \"Search for game history\"\r\n        (search-field)\r\n        (when @num (buttons))]\r\n      [:p {:align \"center\"} (when @box  (hoverbox @box))]\r\n      (when @num (history-list (:now @num)))]]))\r\n"]}